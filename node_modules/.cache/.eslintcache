[{"/home/utensil/utensil/src/index.tsx":"1","/home/utensil/utensil/src/reportWebVitals.js":"2","/home/utensil/utensil/src/theme.ts":"3","/home/utensil/utensil/src/components/App.tsx":"4","/home/utensil/utensil/src/components/GraphList.tsx":"5","/home/utensil/utensil/src/components/VisNetwork.tsx":"6","/home/utensil/utensil/src/components/EdgeDialog.tsx":"7","/home/utensil/utensil/src/libs/axios.ts":"8","/home/utensil/utensil/src/components/Dialog/index.tsx":"9","/home/utensil/utensil/src/components/NodeDialog.tsx":"10","/home/utensil/utensil/src/constants/colors.ts":"11","/home/utensil/utensil/src/libs/vis-custom-network/index.ts":"12","/home/utensil/utensil/src/libs/vis-custom-network/VisCustomNetwork.ts":"13"},{"size":727,"mtime":1634598184563,"results":"14","hashOfConfig":"15"},{"size":425,"mtime":1634598184563,"results":"16","hashOfConfig":"15"},{"size":755,"mtime":1634598184563,"results":"17","hashOfConfig":"15"},{"size":3687,"mtime":1634598184559,"results":"18","hashOfConfig":"15"},{"size":1335,"mtime":1634598184559,"results":"19","hashOfConfig":"15"},{"size":3641,"mtime":1634598184559,"results":"20","hashOfConfig":"15"},{"size":2102,"mtime":1634598184559,"results":"21","hashOfConfig":"15"},{"size":142,"mtime":1634598184563,"results":"22","hashOfConfig":"15"},{"size":1481,"mtime":1634598184559,"results":"23","hashOfConfig":"15"},{"size":1327,"mtime":1634598184559,"results":"24","hashOfConfig":"15"},{"size":223,"mtime":1634598184559,"results":"25","hashOfConfig":"15"},{"size":84,"mtime":1634598184563,"results":"26","hashOfConfig":"15"},{"size":3587,"mtime":1635175284631,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"s90vu8",{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"32","messages":"33","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"34"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56"},"/home/utensil/utensil/src/index.tsx",[],"/home/utensil/utensil/src/reportWebVitals.js",[],"/home/utensil/utensil/src/theme.ts",["57"],"import { red } from \"@material-ui/core/colors\";\nimport { createMuiTheme } from \"@material-ui/core/styles\";\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    type: \"light\",\n    // primary: {\n    //   main: \"#61dafb\",\n    //   light: \"#61dafb\",\n    //   dark: \"#21a1c4\",\n    // },\n    // secondary: {\n    //   main: \"#b5ecfb\",\n    //   light: \"#61dafb\",\n    //   dark: \"#21a1c4\",\n    // },\n    // error: {\n    //   main: red.A400,\n    // },\n    background: {\n      default: \"#282c34\",\n    },\n  },\n  overrides: {\n    MuiPaper: {\n      root: {\n        margin: \"10px\",\n        backgroundColor: \"#fff\", // 5d737e\n      },\n    },\n    MuiButton: {\n      root: {\n        margin: \"5px\",\n      },\n    },\n  },\n});\n\nexport default theme;\n","/home/utensil/utensil/src/components/App.tsx",["58"],"import _ from \"lodash\";\nimport React, { useRef, useState, useEffect } from \"react\";\nimport {\n  Container,\n  Paper,\n  Box,\n  Button,\n  Grid,\n  TextField,\n  Card,\n  CardContent,\n  Typography,\n} from \"@material-ui/core\";\n\nimport { Graph } from \"models\";\nimport axios from \"libs/axios\";\nimport VisCustomNetwork from \"libs/vis-custom-network\";\nimport VisNetwork from \"./VisNetwork\";\nimport GraphList from \"./GraphList\";\n\nfunction App() {\n  const networkRef = useRef<VisCustomNetwork | null>(null);\n\n  const [graphs, setGraphs] = useState<Graph[]>([]);\n  const [graph, setGraph] = useState<Graph | null>(null);\n  const [graphName, setGraphName] = useState(\"\");\n  const [graphNote, setGraphNote] = useState(\"\");\n\n  const refreshList = async () => {\n    const { data } = await axios.get(\"/api/graphs/\");\n    setGraphs(data);\n  };\n\n  const handleGraphSelected = (id: any) => {\n    const graph = graphs?.find((g: any) => g.id === id);\n    if (graph !== null) {\n      setGraph(graph);\n      const data = JSON.parse(graph?.data);\n      networkRef.current?.setData(data);\n    }\n  };\n\n  const handleGraphDelete = async (id: any) => {\n    await axios.delete(`/api/graphs/${id}/`);\n    await refreshList();\n  };\n\n  const handleSave = async () => {\n    // const clone = _.cloneDeepWith(networkRef.current?.network, (x: any) => {\n    //   return x;\n    // });\n    // const edges = clone.body.data.edges.get();\n    // const nodes = clone.body.data.nodes.get();\n\n    const edges = networkRef.current?.edges.get();\n    const nodes = networkRef.current?.nodes.get();\n    const positions = networkRef.current?.network.getPositions();\n\n    for (const node of nodes) {\n      node.x = positions[node.id].x;\n      node.y = positions[node.id].y;\n    }\n\n    console.log(nodes);\n\n    await axios.post(\"/api/graphs/\", {\n      name: graphName,\n      note: graphNote,\n      data: JSON.stringify({ edges, nodes }),\n    });\n\n    await refreshList();\n  };\n\n  useEffect(() => {\n    refreshList();\n  }, []);\n\n  return (\n    <Container>\n      <Grid container>\n        <Grid item xs={9}>\n          <Paper>\n            <VisNetwork ref={networkRef} />\n            <Box m={1}>\n              <TextField\n                id=\"outlined-basic\"\n                label=\"Graph Name\"\n                variant=\"outlined\"\n                size=\"small\"\n                value={graphName}\n                onChange={(e: any) => setGraphName(e.target.value)}\n                fullWidth\n              />\n            </Box>\n            <Box m={1}>\n              <TextField\n                id=\"outlined-basic\"\n                label=\"Note\"\n                multiline\n                rows={4}\n                variant=\"outlined\"\n                size=\"small\"\n                value={graphNote}\n                onChange={(e: any) => setGraphNote(e.target.value)}\n                fullWidth\n              />\n            </Box>\n            <Box>\n              <Button variant=\"outlined\" color=\"primary\" onClick={handleSave}>\n                Save\n              </Button>\n            </Box>\n          </Paper>\n        </Grid>\n        <Grid item xs={3}>\n          <GraphList\n            graphs={graphs}\n            onGraphSelected={handleGraphSelected}\n            onGraphDelete={handleGraphDelete}\n          />\n          {graph && (\n            <Card variant=\"outlined\">\n              <CardContent>\n                <Typography variant=\"h6\" component=\"h2\">\n                  Note\n                </Typography>\n                <Typography variant=\"body2\" component=\"p\">\n                  {graph.note}\n                </Typography>\n              </CardContent>\n            </Card>\n          )}\n        </Grid>\n      </Grid>\n    </Container>\n  );\n}\n\nexport default App;\n","/home/utensil/utensil/src/components/GraphList.tsx",[],"/home/utensil/utensil/src/components/VisNetwork.tsx",[],"/home/utensil/utensil/src/components/EdgeDialog.tsx",[],"/home/utensil/utensil/src/libs/axios.ts",[],"/home/utensil/utensil/src/components/Dialog/index.tsx",[],"/home/utensil/utensil/src/components/NodeDialog.tsx",[],"/home/utensil/utensil/src/constants/colors.ts",[],"/home/utensil/utensil/src/libs/vis-custom-network/index.ts",[],"/home/utensil/utensil/src/libs/vis-custom-network/VisCustomNetwork.ts",["59"],"import { v4 as uuidv4 } from \"uuid\";\nimport { Network } from \"vis-network\";\nimport { DataSet } from \"vis-data\";\n\nimport { NODE_COLORS } from \"constants/colors\";\nimport { truncateSync } from \"fs\";\n\nexport default class VisCustomNetwork extends EventTarget {\n  dom: HTMLElement;\n  network: Network;\n  nodes: DataSet;\n  edges: DataSet;\n  options: any;\n\n  constructor(dom: HTMLElement) {\n    super();\n    this.dom = dom;\n    this.nodes = new DataSet();\n    this.edges = new DataSet();\n    this.options = {\n      manipulation: {\n        enabled: true,\n        addNode: this.addNode,\n        editNode: this.editNode,\n        deleteNode: this.deleteNode,\n        addEdge: this.addEdge,\n        editEdge: false,\n        deleteEdge: false,\n      },\n      interaction: {\n        selectConnectedEdges: false,\n      },\n      edges: {\n        color: \"#411811\",\n        chosen: false,\n      },\n      physics: {\n        enabled: false,\n      },\n    };\n    this.network = new Network(\n      dom,\n      { nodes: this.nodes, edges: this.edges },\n      this.options\n    );\n\n    this.on(\"node-added\", ({ callback, node }: any) => {\n      callback(node);\n    });\n\n    this.on(\"edge-added\", ({ callback, edge }: any) => {\n      const from = this.nodes.get(edge.from);\n      const to = this.nodes.get(edge.to);\n      const { arrows } = edge;\n\n      const id = uuidv4();\n      const level = Math.max(from.level, to.level) + 1;\n      const middle = {\n        id,\n        label: \"\",\n        level,\n        color: NODE_COLORS[level],\n        opacity: 0.5,\n        x: (from.x + to.x) / 2,\n        y: (from.y + to.y) / 2\n      };\n\n      this.nodes.add(middle);\n\n      this.edges.add([\n        //{ from: from.id, to: id },\n        { from: from.id, to: id, eventual: to.id },\n        { from: id, to: to.id, arrows },\n      ]);\n    });\n  }\n\n  setData = (data: any): void => {\n    this.nodes.clear();\n    this.edges.clear();\n\n    this.nodes.add(data.nodes);\n    this.edges.add(data.edges);\n    this.network = new Network(\n      this.dom,\n      { nodes: this.nodes, edges: this.edges },\n      this.options\n    );\n\n    data.nodes.forEach((node) => {\n      this.network.moveNode(node.id, node.x, node.y);\n    });\n  };\n\n  addNode = (node: any, callback: any): void => {\n    this.triggerEvent(\"add-node\", { node, callback });\n  };\n\n  editNode = (node: any, callback: any): void => {\n    this.triggerEvent(\"edit-node\", { node, callback });\n  };\n\n  deleteNode = (data: any, callback: any): void => {\n    const queue = [...data.nodes];\n    while (queue.length) {\n      const nodeId = queue.shift();\n      const connectedNodeIds = this.network.getConnectedNodes(\n        nodeId\n      ) as string[];\n\n      const node = this.nodes.get(nodeId);\n      for (const connectedNodeId of connectedNodeIds) {\n        const connectedNode = this.nodes.get(connectedNodeId);\n        if (\n          connectedNode.level > node.level &&\n          !data.nodes.includes(connectedNodeId)\n        ) {\n          data.nodes.push(connectedNodeId);\n          queue.push(connectedNodeId);\n        }\n      }\n    }\n    callback(data);\n  };\n\n  addEdge = (edge: any, callback: any): void => {\n    this.triggerEvent(\"add-edge\", { edge, callback });\n  };\n\n  /***************************\n   * Custom Event Management *\n   ***************************/\n  on = (event: string, handler: Function): void => {\n    this.addEventListener(event, (e: any) => {\n      if (handler) {\n        handler(e.detail);\n      }\n    });\n  };\n\n  triggerEvent = (name: string, payload: object = {}): void => {\n    this.dispatchEvent(new CustomEvent(name, { detail: payload }));\n  };\n}\n",{"ruleId":"60","severity":1,"message":"61","line":1,"column":10,"nodeType":"62","messageId":"63","endLine":1,"endColumn":13},{"ruleId":"60","severity":1,"message":"64","line":1,"column":8,"nodeType":"62","messageId":"63","endLine":1,"endColumn":9},{"ruleId":"60","severity":1,"message":"65","line":6,"column":10,"nodeType":"62","messageId":"63","endLine":6,"endColumn":22},"@typescript-eslint/no-unused-vars","'red' is defined but never used.","Identifier","unusedVar","'_' is defined but never used.","'truncateSync' is defined but never used."]